<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>أقرب فرع صيدليات عابدين</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
<style>
  * {box-sizing: border-box; font-family: 'Cairo', sans-serif;}
  body {min-height: 100vh; margin:0; display:flex; justify-content:center; align-items:center; background: radial-gradient(circle at top, #1b1b1b, #000); color:#fff;}
  .container {background: linear-gradient(145deg, #111, #1c1c1c); padding:25px; border-radius:20px; box-shadow:0 0 40px rgba(76,175,80,0.4); max-width:450px; width:90%;}
  h1 {text-align:center; color:#4caf50; margin-bottom:20px;}
  input {width:100%; padding:12px; margin-top:10px; border-radius:10px; border:none; outline:none; font-size:16px;}
  button {width:100%; padding:14px; margin-top:15px; border:none; border-radius:15px; background: linear-gradient(135deg, #4caf50, #2e7d32); color:#fff; font-size:18px; cursor:pointer; box-shadow:0 0 15px rgba(76,175,80,0.7); transition:0.2s;}
  button:hover {transform: scale(1.05);}
  #result {margin-top:20px; padding:15px; background:#0f2d16; border-radius:12px; text-align:center; font-size:18px; display:none;}
</style>
</head>
<body>
<div class="container">
  <h1>أقرب فرع صيدليات عابدين</h1>
  <input type="text" id="userLocation" placeholder="اكتب موقعك بالعرض والطول (مثال: 30.0123, 31.2345)">
  <button id="findBranch">اعرف أقرب فرع</button>
  <div id="result"></div>
</div>

<script>
  const branches = [
    {name: "دار السلام", lat: 26.28253, lng: 32.04329},
    {name: "حدائق الاهرام", lat: 29.95278, lng: 31.09044},
    {name: "ترسا", lat: 29.98774, lng: 31.15552},
    {name: "المحطه", lat: 30.01441, lng: 31.21027},
    {name: "العتبه", lat: 30.05405, lng: 31.24597},
    {name: "المساحه", lat: 30.01275, lng: 31.19652},
    {name: "جنينه مول", lat: 30.06068, lng: 31.32585},
    {name: "اللبيني", lat: 29.99578, lng: 31.14397},
    {name: "مؤسسه", lat: 30.11705, lng: 31.24899},
    {name: "خاتم", lat: 30.00511, lng: 31.20295},
    {name: "هليوبليس", lat: 30.10704, lng: 31.34674},
    {name: "عباسيه", lat: 30.00818, lng: 31.25264}
  ];

  function distance(lat1, lon1, lat2, lon2) {
    // حساب المسافة بالكيلومتر
    const R = 6371;
    const dLat = (lat2-lat1)*Math.PI/180;
    const dLon = (lon2-lon1)*Math.PI/180;
    const a = Math.sin(dLat/2)*Math.sin(dLat/2) +
              Math.cos(lat1*Math.PI/180)*Math.cos(lat2*Math.PI/180) *
              Math.sin(dLon/2)*Math.sin(dLon/2);
    const c = 2*Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
    return R*c;
  }

  document.getElementById('findBranch').addEventListener('click', () => {
    const val = document.getElementById('userLocation').value.trim();
    if(!val.includes(',')) { alert('اكتب العرض والطول مفصولين بفاصلة'); return; }
    const [lat, lng] = val.split(',').map(Number);
    if(isNaN(lat) || isNaN(lng)) { alert('تأكد من إدخال أرقام صحيحة'); return; }

    let closest = branches[0];
    let minDist = distance(lat, lng, closest.lat, closest.lng);

    branches.forEach(branch => {
      const d = distance(lat, lng, branch.lat, branch.lng);
      if(d < minDist) { minDist = d; closest = branch; }
    });

    const mapLink = `https://www.google.com/maps/search/?api=1&query=${closest.lat},${closest.lng}`;
    document.getElementById('result').style.display = 'block';
    document.getElementById('result').innerHTML = `
      أقرب فرع: <b>${closest.name}</b><br>
      المسافة تقريبية: <b>${minDist.toFixed(2)} كم</b><br>
      <a href="${mapLink}" target="_blank" style="color:#4caf50; text-decoration:underline;">افتح على Google Maps</a>
    `;
  });
</script>
</body>
</html>
